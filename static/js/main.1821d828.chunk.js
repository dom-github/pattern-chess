(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{27:function(e,n,t){"use strict";t.r(n);var r,i,c,a,o,s,l,d,u,p,b,h,f,j,g,x,v,O,m,w,y,k,C,B,q,E,I,F=t(1),H=t.n(F),R=t(13),S=t.n(R),A=t(3),L=t(4),N=t(2),P="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",T={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},_={b:[17,15],w:[-17,-15]},W={b:[16,32],w:[-16,-32]},K=[8,7,6,5,4,3,2,1],Q=["a","b","c","d","e","f","g","h"],U=0,D=119,M=t(0),$=N.b.input(r||(r=Object(A.a)(["\n    margin-top: 20px;\n    width: 25vw;\n    min-width: 200px;\n    border: 1px solid gray;\n    border-radius: 10px;\n    padding: 10px 20px;\n"]))),G=function(e){var n=e.fen,t=e.setFen,r=Object(F.useState)(n),i=Object(L.a)(r,2),c=i[0],a=i[1],o=["new","start","chess","standard","default","init","new","reset","normal","regular"],s=["now","current","cur","board","update","get"],l=function(e){var n=!0,t=e.split(/\s+/)[0].split("/");8!==t.length&&(n=!1);for(var r=0;r<t.length;r++){for(var i=0,c=!1,a=0;a<t[r].length;a++)isNaN(t[r][a])?(/^[prnbqkPRNBQK]$/.test(t[r][a])||(n=!1),i+=1,c=!1):(c&&(n=!1),i+=parseInt(t[r][a],10),c=!0);8!==i&&(n=!1)}return n};return Object(M.jsx)($,{type:"text",value:l(c)?n:c,onChange:function(e){a(e.target.value),l(e.target.value)?t(e.target.value):o.includes(e.target.value,0)?(t(P),a(P)):s.includes(e.target.value,0)?a(n):"blank"!==e.target.value&&"empty"!==e.target.value||(t("8/8/8/8/8/8/8/8"),a("8/8/8/8/8/8/8/8"))}})},z=t(5),J=function(e,n,t,r){"p"===n?_[r].forEach((function(i){var c,a=t+i;136&a||(null===(c=e[a])||void 0===c||c.controlledBy.push({piece:n,color:r,square:t}))})):T[n].forEach((function(i){for(var c=t+i;!(136&c);){var a,o;if(null===(a=e[c])||void 0===a||a.controlledBy.push({piece:n,color:r,square:t}),"n"===n||"k"===n)break;if(null!==(null===(o=e[c])||void 0===o?void 0:o.piece))break;c+=i}}))},V=function(e,n,t){n.forEach((function(n){var t=n.piece.toLowerCase(),r=n.squareHex;J(e,t,r,"w")})),t.forEach((function(n){var t=n.piece.toLowerCase(),r=n.squareHex;J(e,t,r,"b")}))},Z=function(e){var n=function(e){return 15&e}(e),t=function(e){return e>>4}(e);return"abcdefgh".substring(n,n+1)+"87654321".substring(t,t+1)},X=function(e){for(var n=[],t=[],r=[],i=e.split(/\s+/)[0],c=0,a=0;a<i.length;a++){var o=i.charAt(a);if("/"===o){c+=8;for(var s=0;s<8;s++)n.push(null)}else if(-1!=="0123456789".indexOf(o))for(var l=parseInt(o,10),d=0;d<l;d++)n.push({hexId:c,algId:Z(c),piece:null,pieceColor:null,controlledBy:[]}),c++;else{var u={piece:o,squareHex:c,squareAlg:Z(c)};o.match(/[A-Z]/)?t.push(u):r.push(u),n.push({hexId:c,algId:Z(c),piece:o.toLowerCase(),pieceColor:o.match(/[A-Z]/)?"w":"b",controlledBy:[]}),c++}}return{board:n,white_pieces:t,black_pieces:r}},Y=t(18),ee=function(e,n,t,r,i,c,a,o){var s;if(console.log(e,n,t,r,i,c),"O-O"===c||"O-O-O"===c){var l="w"===i?116:4,d=("O-O"===c?7:0)+("w"===i?112:0),u=l+("O-O"===c?2:-2),p=d+("O-O"===c?-2:3);e[l].piece=null,e[l].pieceColor=null,e[d].piece=null,e[d].pieceColor=null,e[u].piece="k",e[u].pieceColor=i,e[p].piece="r",e[p].pieceColor=i,s="w"===i?"K":"k"}else e[n].piece=null,e[n].pieceColor=null,e[t].piece=o||r,e[t].pieceColor=i,s="w"===i?r.toUpperCase():r.toLowerCase();var b=function(e){for(var n=0,t="",r=U;r<=D;r++){if(null==e[r].piece)n++;else{n>0&&(t+=n,n=0);var i=e[r].piece;t+="w"===e[r].pieceColor?i.toUpperCase():i.toLowerCase()}r+1&136&&(n>0&&(t+=n),r!==D&&(t+="/"),n=0,r+=8)}return t}(e),h=[].concat(Object(Y.a)(a.current),[{san:c,piece:s,fen:b}]);return a.current=h,b},ne=N.b.div(i||(i=Object(A.a)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n"]))),te=N.b.div(c||(c=Object(A.a)(["\n    width: 60vw;\n    height: 98vh;\n"]))),re=N.b.div(a||(a=Object(A.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100px;\n    height: 100px;\n    border: 1px solid gray;\n    background-color: #181A1B;\n    &.black{\n        //disabled\n        //background-color: #111;\n    }\n"]))),ie=N.b.img(o||(o=Object(A.a)(["\n    position: absolute;\n    width: inherit;\n    height: inherit;\n    &.selected{\n        \n        box-shadow: 0 0 10px 0 yellow;\n        //border-radius: 50%;\n    }\n"]))),ce=N.b.div(s||(s=Object(A.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n"]))),ae=N.b.div(l||(l=Object(A.a)(["\n    text-align: center;\n    align-items: center;\n    height: 100px;\n    width: 20px;\n    position: relative;\n    top: 50px;\n"]))),oe=N.b.div(d||(d=Object(A.a)(["\n    display: flex;\n    flex-direction: row;\n    width: 60vw;\n    justify-content: center;\n"]))),se=N.b.div(u||(u=Object(A.a)(["\n    display: flex;\n    justify-content: center;\n    width: 100px;\n    height: 20px;\n    position: relative;\n    left: 5px;\n    top: 5px;\n"]))),le=N.b.div(p||(p=Object(A.a)(["\nmargin-top: 20px;\n\n"]))),de=function(e){var n=e.fen,t=e.setFen,r=e.moveHistory,i=e.showBlkCtrl,c=e.showWhtCtrl,a=Object(F.useState)(),o=Object(L.a)(a,2),s=o[0],l=o[1],d=function(e){var n=p[e.target.id];if(s){var i=s.piece,c=s.pieceColor,a=Z(e.target.id);if(s.hexId!==parseInt(e.target.id)){var o=ee(p,s.hexId,e.target.id,i,c,a,r);t(o)}l()}else n.piece?l(n):l()},u=X(n),p=u.board,b=u.white_pieces,h=u.black_pieces;return V(p,b,h),Object(M.jsxs)(te,{children:[Object(M.jsxs)(ne,{children:[Object(M.jsx)(ce,{children:K.map((function(e){return Object(M.jsx)(ae,{children:e},e)}))}),Q.map((function(e,n){return Object(M.jsx)(le,{id:e,children:K.map((function(e,t){var r=n+16*t,a=s?s.hexId:-1,o=p[r],l=o?o.piece:0,u=o?o.pieceColor:0,b=o?o.controlledBy:[],h=l?1:.75,f=!(r!==a&&!b.find((function(e){return Object.values(e).includes(a,0)}))),j=b.filter((function(e){return"w"===e.color})),g=b.filter((function(e){return"b"===e.color})),x=.15*(j.length*c+g.length*i)*h,v=5*(j.length*c+g.length*i),O=100*(null===j||void 0===j?void 0:j.length)*h*c,m=100*(null===g||void 0===g?void 0:g.length)*h*i;return Object(M.jsx)(re,{id:r,className:n%2===0&&t%2===0||n%2!==0&&t%2!==0?"white":"black",children:Object(M.jsx)(ie,{id:r,onClick:d,src:l?"./assets/pieceslisa/".concat(l).concat(u,".png"):"./assets/pieceslisa/em.png",className:!0===f?"selected":"none",style:Object(z.a)(Object(z.a)({},N.b),{},{filter:"drop-shadow(0px 0px ".concat(v,"px rgba(").concat(m,", 0, ").concat(O,", 0.75))"),backgroundColor:"rgba(".concat(m,", ").concat(35,", ").concat(O,", ").concat(x,")")})})},e)}))},e)}))]}),Object(M.jsx)(oe,{children:Q.map((function(e){return Object(M.jsx)(se,{children:e},e)}))})]})},ue=N.b.div(b||(b=Object(A.a)(["\npadding: 20px 40px;\n    margin-top: 20px;\n    border: 2px solid whitesmoke;\n    width: 25vw;\n    height: auto;\n    min-width: 100px;\n    min-height: 200px;\n    text-align: center;\n    text-decoration: underline;\n"]))),pe=N.b.div(h||(h=Object(A.a)(["\n    text-decoration: none;\n\n"]))),be=N.b.span(f||(f=Object(A.a)(["\n    display: inline-block;\n    text-decoration: none;\n    cursor: pointer;\n\n"]))),he=function(e){var n=e.moveHistory,t=e.setFen;return Object(M.jsxs)(ue,{children:["Move History:",Object(M.jsx)(pe,{children:n.current.map((function(e,r){var i=e.san,c=e.piece,a=e.fen,o="\u2657\u2654\u2658\u2659\u2655\u2656\u265d\u265a\u265e\u265f\u265b\u265c".charAt("bknpqrBKNPQR".indexOf(c)),s=r+1===n.current.length?"":", ";return Object(M.jsxs)(be,{onClick:function(){t(a)},children:[o,i,s,"\xa0"]},r)}))})]})},fe=t(11),je=t.n(fe),ge=t(17),xe=function(e){var n={status:"loading",error:null,data:[]},t=Object(F.useReducer)((function(e,t){switch(t.type){case"FETCHING":return Object(z.a)(Object(z.a)({},n),{},{status:"loading"});case"FETCHED":return Object(z.a)(Object(z.a)({},n),{},{status:"done",data:t.payload});case"FETCH_ERROR":return Object(z.a)(Object(z.a)({},n),{},{status:"error",error:t.payload});default:return e}}),n),r=Object(L.a)(t,2),i=r[0],c=r[1],a=Object(F.useRef)({});return Object(F.useEffect)((function(){var n=!1;if(e)return function(){var t=Object(ge.a)(je.a.mark((function t(){var r,i,o;return je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c({type:"FETCHING"}),!a.current[e]){t.next=7;break}console.log("fetching cached datatata!"),r=a.current[e],c({type:"FETCHED",payload:r}),t.next=23;break;case 7:return t.prev=7,t.next=10,fetch(e);case 10:return i=t.sent,t.next=13,i.json();case 13:o=t.sent,a.current[e]=o,c({type:"FETCHED",payload:o}),t.next=23;break;case 18:if(t.prev=18,t.t0=t.catch(7),!n){t.next=22;break}return t.abrupt("return");case 22:c({type:"FETCH_ERROR",payload:t.t0.message});case 23:case"end":return t.stop()}}),t,null,[[7,18]])})));return function(){return t.apply(this,arguments)}}()(),function(){n=!0}}),[e]),{state:i}},ve=N.b.button(j||(j=Object(A.a)(["\npadding: 5px;\n"]))),Oe=N.b.input(g||(g=Object(A.a)(["\n    padding: 10px;\n    width: 15vw;\n    height: 1vh;\n    min-width: 150px;\n    min-height: 30px;\n"]))),me=N.b.div(x||(x=Object(A.a)(["\n    padding: 10px;\n    width: 23vw;\n    height: 16vh;\n    min-width: 190px;\n    min-height: 50px;\n"]))),we=N.b.div(v||(v=Object(A.a)(["\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n"]))),ye=N.b.button(O||(O=Object(A.a)(["\n    background: none;\n    color: inherit;\n    border: none;\n    padding: 0;\n    font: inherit;\n    cursor: pointer;\n    outline: inherit;\n    margin: 0 10px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 7vw;\n    height: 20px;\n    border-bottom: 1px solid gray;\n    background-color: #181A1B;\n    border-radius: 15%;\n    &.selected{\n        border-bottom: none;\n    }\n"]))),ke=N.b.div(m||(m=Object(A.a)(["\n    display: flex;\n    justify-content: space-around;\n    align-items: center; \n    flex-direction: column;\n    border: 1px solid gray;\n    padding: 10px;\n    width: 25vw;\n    height: 25vh;\n    min-width: 200px;\n    min-height: 100px;\n"]))),Ce=N.b.div(w||(w=Object(A.a)(["\n    background-color: #555;\n    padding: 10px;\n    width: 23vw;\n    height: 16vh;\n    min-width: 190px;\n    min-height: 50px;\n    overflow-y: scroll;\n"]))),Be=N.b.div(y||(y=Object(A.a)(["\n    background-color: #555;\n    padding: 5px;\n    cursor: pointer;\n"]))),qe=function(e){var n,t,r,i=e.moveHistory,c=e.setFen,a=Object(F.useState)("examples"),o=Object(L.a)(a,2),s=o[0],l=o[1],d=Object(F.useState)(""),u=Object(L.a)(d,2),p=u[0],b=u[1],h=sessionStorage.getItem("currentUser"),f=Object(F.useState)("/api/db/players"),j=Object(L.a)(f,2),g=j[0],x=j[1],v=xe(g).state,O=function(e){var n=e.split(/\n\n/);n=n[n.length-1];for(var t,r=/(\([^\(\)]+\))+?/g;r.test(n);)n=n.replace(r,"");return n=(n=(n=(n=n.replace(/{(.*?)}|\((.*?)\)/g,"")).replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,""),(n=(t=n,t.replace(/^\s+|\s+$/g,"")).split(new RegExp(/\s+/))).pop(n.length),n},m=function(e){i.current=[];var n=X(P),t=n.board,r=n.white_pieces,a=n.black_pieces;V(t,r,a);var o=P;e.forEach((function(e,n){var c=n%2===0?"w":"b",s=function(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}(e),l=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),d=function(e){var n=e.charAt(0);if(n>="a"&&n<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return"p"}return"o"===(n=n.toLowerCase())?"k":n}(s);if(l){l[1];var u=l[2],p=l[3],b=l[4],h=function(e){var n="a".charCodeAt(0),t=e.split(""),r=t[0].charCodeAt(0)-n;return 16*(8-parseInt(t[1]))+r}(p),f=w(t,c,t[h],d,u);o=ee(t,f,h,d,c,e,i,b),t=X(o).board,r=X(o).white_pieces,a=X(o).black_pieces,V(t,r,a)}else"O-O-O"!==s&&"O-O"!==s||(o=ee(t,null,null,null,c,s,i),t=X(o).board,r=X(o).white_pieces,a=X(o).black_pieces,V(t,r,a))})),c(o)},w=function(e,n,t,r,i){var c,a=!1;if("p"===r&&null===t.piece)W[n].find((function(i){var o=t.hexId-i;if("p"!==e[o].piece||e[o].pieceColor===n)return c=o,e[o].piece===r&&e[o].pieceColor===n;a=!0,e[o].piece=null}));if("p"!==r||"p"===r&&null!==t.piece||!0===a){var o=t.controlledBy.filter((function(e){return e.piece.toLowerCase()===r.toLowerCase()&&e.color===n}));if(o.length>1&&void 0!==i){var s=o.find((function(e){return Z(e.square).includes(i)}));c=s.square}else c=o[0].square}return c};return"done"===v.status?Object(M.jsxs)(ke,{children:[Object(M.jsxs)(we,{children:[Object(M.jsx)(ye,{className:"profile"===s?"selected":"",onClick:function(){l("profile")},children:"PROFILE"}),Object(M.jsx)(ye,{className:"archive"===s?"selected":"",onClick:function(){l("archive"),x(null!==h?"https://api.chess.com/pub/player/".concat(h,"/games/archives"):"/api/db/players")},children:"ARCHIVE"}),Object(M.jsx)(ye,{className:"examples"===s?"selected":"",onClick:function(){x("/api/db/players"),l("examples")},children:"EXAMPLES"})]}),"archive"===s&&(null===(n=v.data)||void 0===n?void 0:n.archives)&&Object(M.jsx)(Ce,{children:v.data.archives.map((function(e,n){var t=e.match(/\d+\/\d\d/);return Object(M.jsx)(Be,{onClick:function(){x("https://api.chess.com/pub/player/".concat(h,"/games/").concat(t))},children:t},n)}))}),"archive"===s&&(null===(t=v.data)||void 0===t?void 0:t.games)&&Object(M.jsx)(Ce,{children:v.data.games.map((function(e,n){return Object(M.jsxs)(Be,{onClick:function(){var n=O(e.pgn);m(n)},children:[e.white.username," vs ",e.black.username]},n)}))}),(null===(r=v.data)||void 0===r?void 0:r.data)&&("examples"===s||!h&&"archive"===s)&&Object(M.jsx)(Ce,{children:v.data.data.map((function(e){return e.games.map((function(n,t){return Object(M.jsxs)(Be,{onClick:function(){var e=O(n);m(e)},children:[e.name," game ",t+1]},t)}))}))}),"profile"===s&&Object(M.jsxs)(me,{children:[Object(M.jsx)(Oe,{placeholder:"Chess.com username",value:p,onChange:function(e){b(e.target.value)}}),Object(M.jsx)(ve,{onClick:function(){sessionStorage.setItem("currentUser",p),x("https://api.chess.com/pub/player/".concat(p,"/games/archives"))},children:"Log In"}),h]})]}):"error"===v.status?Object(M.jsx)(ke,{children:"There doesn't seem to be anything here!"}):Object(M.jsx)(ke,{children:"Loading Profile..."})},Ee=Object(N.a)(k||(k=Object(A.a)(["\n  *,\n  *:before,\n  *:after {\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    background-color: #181A1B;\n    color: #eee;\n    }\n\n  html, body {\n    max-width: 100vw;\n  }\n\n\n  /* http://meyerweb.com/eric/tools/css/reset/\n    v2.0 | 20110126\n    License: none (public domain)\n  */\n\n  html, body, div, span, applet, object, iframe,\n  h1, h2, h3, h4, h5, h6, p, blockquote, pre,\n  a, abbr, acronym, address, big, cite, code,\n  del, dfn, em, img, ins, kbd, q, s, samp,\n  small, strike, strong, sub, sup, tt, var,\n  b, u, i, center,\n  dl, dt, dd, ol, ul, li,\n  fieldset, form, label, legend,\n  caption, tbody, tfoot, thead, tr, th, td,\n  article, aside, canvas, details, embed,\n  figure, figcaption, footer, header, hgroup,\n  menu, nav, output, ruby, section, summary,\n  time, mark, audio, video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    vertical-align: baseline;\n  }\n  /* HTML5 display-role reset for older browsers */\n  article, aside, details, figcaption, figure,\n  footer, header, hgroup, menu, nav, section {\n    display: block;\n  }\n\n  ol, ul {\n    list-style: none;\n  }\n  blockquote, q {\n    quotes: none;\n  }\n  blockquote:before, blockquote:after,\n  q:before, q:after {\n    content: '';\n    content: none;\n  }\n\n  body {\n    line-height: 1.25;\n    background: #222;\n    color: white;\n  }\n\n"]))),Ie=N.b.div(C||(C=Object(A.a)(["\n    border: 1px solid whitesmoke;\n    margin-top: 20px;\n    width: 25vw;\n    height: auto;\n    min-width: 200px;\n    min-height: 100px;\n    padding: 10px 20px;\n"]))),Fe=N.b.div(B||(B=Object(A.a)(["\n"]))),He=N.b.div(q||(q=Object(A.a)(["\nheight: 10px;\n"]))),Re=function(e){var n=e.showBlkCtrl,t=e.showWhtCtrl,r=e.setShowBlkCtrl,i=e.setShowWhtCtrl;return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(Ie,{children:[Object(M.jsxs)(Fe,{children:["Black Control: ",Object(M.jsx)("button",{onClick:function(){r(1===n?0:1)},children:"show/hide"})]}),Object(M.jsx)(He,{}),Object(M.jsxs)(Fe,{children:["White Control:  ",Object(M.jsx)("button",{onClick:function(){i(1===t?0:1)},children:"show/hide"})]})]})})};var Se=N.b.div(E||(E=Object(A.a)(["\n  margin: 0;\n  margin-top: 40px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  background-color: #181A1B;\n  color: whitesmoke;\n"]))),Ae=N.b.div(I||(I=Object(A.a)(["\n  margin: 0;\n  margin-top: 25px;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  font-size: larger;\n"]))),Le=function(){var e=Object(F.useState)(P),n=Object(L.a)(e,2),t=n[0],r=n[1],i=Object(F.useRef)([]),c=Object(F.useState)(1),a=Object(L.a)(c,2),o=a[0],s=a[1],l=Object(F.useState)(1),d=Object(L.a)(l,2),u=d[0],p=d[1];return Object(M.jsxs)("div",{className:"App",style:{backgroundColor:"#181A1B",margin:"0"},children:[Object(M.jsx)(Ee,{}),Object(M.jsxs)(Se,{children:[Object(M.jsx)(de,{fen:t,setFen:r,moveHistory:i,showBlkCtrl:o,showWhtCtrl:u}),Object(M.jsxs)(Ae,{children:[Object(M.jsx)(qe,{setFen:r,moveHistory:i}),Object(M.jsx)(G,{fen:t,setFen:r}),Object(M.jsx)(Re,{setShowBlkCtrl:s,setShowWhtCtrl:p,showBlkCtrl:o,showWhtCtrl:u}),Object(M.jsx)(he,{moveHistory:i,setFen:r})]})]})]})},Ne=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,28)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),r(e),i(e),c(e),a(e)}))};S.a.render(Object(M.jsx)(H.a.StrictMode,{children:Object(M.jsx)(Le,{})}),document.getElementById("root")),Ne()}},[[27,1,2]]]);
//# sourceMappingURL=main.1821d828.chunk.js.map